<div class="container" fxLayout="row" fxLayoutAlign="center none">
    <div fxFlex="95%">
        <mat-card>
            <div class="content-header">
    <div>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#/dashboard">Inicio</a></li>

                <li class="breadcrumb-item"><a routerLink="{{directorio}}">Operaciones</a></li>
                <li class="breadcrumb-item active" aria-current="page">Transporte</li>
            </ol>
        </nav>
    </div>
</div><!-- content-header -->
<div class="content-body">


    <div class="card card-invoice">
        <div class="card-header">
            <div>
                <!--<h5 class="mg-b-3">Invoice #DF032AZ00022</h5>-->
                <!--<span class="tx-sm text-muted">Due on September 15, 2019</span>-->
            </div>
            <!--<div class="btn-group-invoice">
            <a [routerLink]="" class="btn btn-brand-02 btn-sm btn-uppercase" (click)="e_guarda()"><i
                data-feather="save"></i>Guardar</a>
          </div>-->
        </div><!-- card-header -->
        <div class="card-body">
            <div class="component mb-2">
                <div class="button-row">
                    <button mat-raised-button color="primary" (click)="e_consulta()" title="Consultar"><i
                            class="fas fa-list mg-r-5 fa-1x"></i>Consultar</button>
                    <button mat-raised-button color="primary" (click)="e_guardar(FormSolicitud.value)"><i
                            class="fas fa-save mg-r-5 fa-1.5x"></i>Guardar</button>

                </div>
            </div>
            <hr>
            <form [formGroup]="FormSolicitud">
                <div class="row">
                    <div class="col-xl-12">
                        <h6 class="mt-3 mb-2 text-primary">+ Cliente</h6>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="form-label required">RFC</label>
                            <select class="custom-select form-control-sm select2 select2-hidden-accessible" id="trfc"
                                style="width: 100%;" tabindex="-1" aria-hidden="true">
                                <option value="">SELECCIONAR</option>
                                <option *ngFor="let dato of datosClientes" [ngValue]="dato.ecliente"
                                    [value]="dato.ecliente">
                                    {{dato.trfc}}
                                </option>
                            </select>
                            <input type="hidden" id="ecliente" style="width: 100%;" tabindex="-1" aria-hidden="true"
                                formControlName="ecliente"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ecliente.errors }">
                            <div *ngIf="submitGuardar && fcontacto.ecliente.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.ecliente.errors.required">RFC es requerido</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="form-label required">Dirección</label>
                            <select class="custom-select form-control-sm" id="edireccion" name="carga[edireccion]"
                                formControlName="edireccion"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.edireccion.errors }">
                                <option value="">SELECCIONAR</option>
                                <option *ngFor="let dato of datosDirecciones" [ngValue]="dato.edireccion">
                                    {{dato.tcalle}},{{dato.tcolonia}}
                                </option>
                            </select>
                            <div *ngIf="submitGuardar && fcontacto.edireccion.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.edireccion.errors.required">Dirección es requerido</div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-xl-12">
                        <h6 class="mt-3 mb-2 text-primary">+ Pago</h6>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Método de pago</label>
                            <select class="custom-select form-control-sm" id="emetodopago" name="carga[emetodopago]"
                                formControlName="emetodopago"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.emetodopago.errors }">
                                <option value="">SELECCIONAR</option>
                                <option *ngFor="let dato of datosMetodoPago" [ngValue]="dato.emetodopago">
                                    {{dato.tdescripcion}}
                                </option>
                            </select>

                            <div *ngIf="submitGuardar && fcontacto.emetodopago.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.emetodopago.errors.required">Método de pago es requerido</div>
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Banco</label>
                            <select class="custom-select form-control-sm" id="ebanco" name="carga[ebanco]"
                                formControlName="ebanco"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ebanco.errors }">
                                <option value="">SELECCIONAR</option>
                                <option *ngFor="let dato of datosBancos" [ngValue]="dato.ebanco">
                                    {{dato.tbanco}}
                                </option>
                            </select>
                            <div *ngIf="submitGuardar && fcontacto.ebanco.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.ebanco.errors.required">Banco es requerido</div>
                            </div>
                        </div>

                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Cfdi</label>
                            <select class="custom-select form-control-sm" id="ecfdi" name="carga[ecfdi]"
                                formControlName="ecfdi"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ecfdi.errors }">
                                <option value="" selected>SELECCIONAR</option>
                                <option *ngFor="let dato of datosCfdi" [ngValue]="dato.ecfdi">
                                    {{dato.tdescripcion}}
                                </option>
                            </select>
                            <div *ngIf="submitGuardar && fcontacto.ecfdi.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.ecfdi.errors.required">Cfdi es requerido</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Cuenta</label>
                            <input class="form-control form-control-sm" type="text"
                                oninput="this.value = this.value.toUpperCase()" id="ecuenta" name="bien[ecuenta]"
                                placeholder="0000" maxlength="4"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ecuenta.errors }" size="4"
                                formControlName="ecuenta">
                            <div *ngIf="submitGuardar && fcontacto.ecuenta.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.ecuenta.errors.required">Cuenta es requerido</div>
                                <div *ngIf="fcontacto.ecuenta.errors?.['number']">Cuenta valor numérico!</div>
                            </div>
                        </div>

                    </div>

                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Moneda</label>
                            <select class="custom-select form-control-sm" id="tmoneda" name="bien[tmoneda]"
                                formControlName="tmoneda"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.tmoneda.errors }">
                                <option value="" selected>SELECCIONAR</option>
                                <option value="MXN">PESO</option>
                                <option value="USD">DOLAR</option>
                            </select>
                            <div *ngIf="submitGuardar && fcontacto.tmoneda.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.tmoneda.errors.required">Moneda es requerido</div>
                            </div>
                        </div>
                    </div>

                </div>
                <hr>
                <div class="row">
                    <div class="col-xl-12">
                        <h6 class="mt-3 mb-2 text-primary">+ Contacto</h6>
                    </div>

                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Fecha de servicio</label>
                            <input class="form-control form-control-sm" type="date" id="fhfechaservicio"
                                name="bien[fhfechaservicio]" formControlName="fhfechaservicio" [min]="nowFechaServicio"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.fhfechaservicio.errors }">
                            <div *ngIf="submitGuardar && fcontacto.fhfechaservicio.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.fhfechaservicio.errors.required">* Fecha de servicio requerido
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Correo</label>
                            <input class="form-control form-control-sm" type="text"
                                oninput="this.value = this.value.toUpperCase()" id="tcorreo" name="bien[tcorreo]"
                                formControlName="tcorreo"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.tcorreo.errors }">
                            <div *ngIf="submitGuardar && fcontacto.tcorreo.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.tcorreo.errors.required">* Correo es requerido</div>
                                <div *ngIf="fcontacto.tcorreo.errors.pattern">Correo no valido: correo@dominio.com</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label required">Teléfono</label>
                            <input class="form-control form-control-sm" type="text"
                                oninput="this.value = this.value.toUpperCase()" id="ttelefono" maxlength="10"
                                placeholder="3141234567" name="bien[ttelefono]"
                                [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ttelefono.errors }"
                                formControlName="ttelefono">
                            <div *ngIf="submitGuardar && fcontacto.ttelefono.errors" class="invalid-feedback">
                                <div *ngIf="fcontacto.ttelefono.errors.required">* Teléfono es requerido</div>
                                <div *ngIf="fcontacto.ttelefono.errors.pattern">Teléfono no valido 1234567890 (10
                                    digitos).
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="form-label">Referencia</label>
                            <input class="form-control form-control-sm" type="text"
                                oninput="this.value = this.value.toUpperCase()" id="treferencia"
                                name="bien[treferencia]" formControlName="treferencia">
                        </div>
                    </div>


                </div>
                <hr>

                <div class="row">
                    <div *ngIf="divOperacion" class="col-sm-12">

                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <h6 class="mt-3 mb-2 text-primary">+ Operación </h6>
                        </div>
                        <div class="row">
                            <div class='col-sm-2'>
                                <div class='form-group'>
                                    <label class="form-label required" for="truta">Ruta</label>
                                    <select class="custom-select form-control-sm" id="truta" name="carga[truta]"
                                        formControlName="truta"
                                        [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.truta.errors }">
                                        <option *ngFor="let dato of datosRutas" [ngValue]="dato.truta"
                                            [selected]="dato.truta == null">
                                            {{dato.tdescripcion}}
                                        </option>
                                    </select>
                                    <div *ngIf="submitGuardar && fcontacto.truta.errors" class="invalid-feedback">
                                        <div *ngIf="fcontacto.truta.errors.required">Ruta es requerido</div>
                                    </div>
                                </div>
                            </div>
                            <div class='col-sm-2'>
                                <div class='form-group'>
                                    <label class="form-label required" for="ttramite">Trámite</label>
                                    <select class="custom-select form-control-sm" id="ttramite" name="carga[ttramite]"
                                        formControlName="ttramite"
                                        [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ttramite.errors }">
                                        <option *ngFor="let dato of datosTramite" [ngValue]="dato.ttramite"
                                            [selected]="dato.ttramite == null">
                                            {{dato.tdescripcion}}
                                        </option>
                                    </select>
                                    <div *ngIf="submitGuardar && fcontacto.ttramite.errors" class="invalid-feedback">
                                        <div *ngIf="fcontacto.ttramite.errors.required">Trámite es requerido</div>
                                    </div>
                                </div>
                            </div>
                            <div class='col-sm-2'>
                                <div class='form-group'>
                                    <label class="form-label required" for="ttipocarga">Carga</label>
                                    <select class="custom-select form-control-sm" id="ttipocarga"
                                        name="carga[ttipocarga]" formControlName="ttipocarga"
                                        [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ttipocarga.errors }"
                                        (ngModelChange)="onChangeTipoCarga($event)">
                                        <option value="null">SELECCIONAR</option>
                                        <option value="CONTENERIZADA">COTENERIZADA</option>
                                        <option value="GENERAL">GENERAL</option>
                                    </select>
                                    <div *ngIf="submitGuardar && fcontacto.ttipocarga.errors" class="invalid-feedback">
                                        <div *ngIf="fcontacto.ttipocarga.errors.required">Carga es requerido</div>
                                    </div>
                                </div>
                            </div>
                            <div class='col-sm-2'>
                                <div class='form-group'>
                                    <label class="form-label required" for="ttipotransporte">Tipo transporte</label>
                                    <select class="custom-select form-control-sm" id="ttipotransporte"
                                        name="carga[ttipotransporte]" formControlName="ttipotransporte"
                                        [ngClass]="{ 'is-invalid': submitGuardar && fcontacto.ttipotransporte.errors }">
                                        <option *ngFor="let dato of datosTipoTransporte"
                                            [ngValue]="dato.ttipotransporte" [selected]="dato.ttipotransporte == null">
                                            {{dato.tdescripcion}}
                                        </option>
                                    </select>
                                    <div *ngIf="submitGuardar && fcontacto.ttipotransporte.errors"
                                        class="invalid-feedback">
                                        <div *ngIf="fcontacto.ttipotransporte.errors.required">Tipo transporte es
                                            requerido
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
                <hr>
                <!---Tipo servicios-->
                <form [formGroup]="FormServicios">
                    <div class="row">
                        <div class="col-xl-12">
                            <h6 class="mt-3 mb-2 text-primary">+ Servicios</h6>
                        </div>
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label class="form-label required">Tipo de mercancia</label>
                                <select [(ngModel)]='ngSelectTipoServicio' class="custom-select form-control-sm"
                                    id="etipomercancia" name="carga[etipomercancia]" formControlName="etipomercancia"
                                    [ngClass]="{ 'is-invalid': submitServicios && fservicios.etipomercancia.errors }"
                                    (ngModelChange)="e_onChangeTipoServicio($event)">
                                    <option value="">SELECCIONAR</option>
                                    <option *ngFor="let dato of arratipoServicios" [ngValue]="dato">
                                        {{dato.tdescripcion}}
                                    </option>
                                </select>

                                <div *ngIf="submitServicios && fservicios.etipomercancia.errors"
                                    class="invalid-feedback">
                                    <div *ngIf="fservicios.etipomercancia.errors.required">Tipo de mercancia es
                                        requerido
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label class="form-label required">Tipo de servicio</label>
                                <select [(ngModel)]='ngSelectServicios' class="custom-select form-control-sm"
                                    id="etiposervicio" name="carga[etiposervicio]" formControlName="etiposervicio"
                                    [ngClass]="{ 'is-invalid': submitServicios && fservicios.etiposervicio.errors }"
                                    (ngModelChange)="e_onChangeServicio($event)">
                                    <option value="">SELECCIONAR</option>
                                    <option *ngFor="let dato of arrservicio" [ngValue]="dato">
                                        {{dato.tdescripcion}}
                                    </option>
                                </select>
                                <div *ngIf="submitServicios && fservicios.etiposervicio.errors"
                                    class="invalid-feedback">
                                    <div *ngIf="fservicios.etiposervicio.errors.required">Tipo servicio es requerido
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div [hidden]="!divServicioEspecifico" class="col-sm-2">
                            <div class="form-group">
                                <label class="form-label required">Solicitud</label>
                                <select [(ngModel)]='ngSelectServicioEspecifico' class="custom-select form-control-sm"
                                    id="etiposolicitud" name="carga[etiposolicitud]" formControlName="etiposolicitud"
                                    [ngClass]="{ 'is-invalid': submitServicios && fservicios.etiposolicitud.errors }">
                                    <option value="">SELECCIONAR</option>
                                    <option *ngFor="let dato of arrtiposolicitud" [ngValue]="dato">
                                        {{dato.tdescripcion}}
                                    </option>
                                </select>
                                <div *ngIf="submitServicios && fservicios.etiposolicitud.errors"
                                    class="invalid-feedback">
                                    <div *ngIf="fservicios.etiposolicitud.errors.required"> Solicitud es requerido
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2 mt-4">
                            <div class="form-group mt-1">
                                <button mat-raised-button color="primary"
                                    (click)="e_agregarServicio(FormServicios.value)"><i
                                        class="fas fa-plus mg-r-5 fa-1.5x"></i>Agregar</button>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-xl-12">
                        <h6 class="mt-3 mb-2 text-primary">+ Servicio(s) agregado(s)</h6>
                    </div>
                    <div class="col-xl-12 mt-4 mb-4">
                        <div class="table-responsive">
                            <table class="table table-sm mg-b-0">
                                <tr>
                                    <th scope="col">Accciones</th>
                                    <th scope="col">#</th>
                                    <th scope="col">Tipo mercancia</th>
                                    <th scope="col">Tipo servicio</th>
                                    <th scope="col">Servicio</th>
                                </tr>
                                <tbody>
                                    <tr *ngFor="let dato of servicios; let i = index">
                                        <td> <button type="button" mat-raised-button color="primary"
                                                (click)="e_eliminar_servicio(dato)"><i
                                                    class="fas fa-trash-alt mg-r-5 fa-1.5x"></i>Eliminar</button> </td>
                                        <td> {{ i + 1}} </td>
                                        <td> {{ dato.ttipomercancia }}</td>
                                        <td> {{ dato.ttiposervicio }}</td>
                                        <td> {{ dato.ttiposolicitud }}</td>

                                    </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <!--Carga(s)-->
                    <div *ngIf="divCarga" class="col-sm-12">
                        <form [formGroup]="FormDatosBien">
                            <div class='row gutters'>

                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <h6 class="mt-3 mb-2 text-primary">+ Mercancia(s)/Biene(s)</h6>
                                </div>


                                <div class='col-sm-2'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="ecodembalaje">Embalaje</label>
                                        <select class="custom-select form-control-sm" id="ecodembalaje"
                                            name="carga[ecodembalaje]" [(ngModel)]="seleccion"
                                            (change)="onChangeEmbalajeBien($event)" formControlName="ecodembalaje"
                                            [ngClass]="{ 'is-invalid': submitBien && f.ecodembalaje.errors }">
                                            <option *ngFor="let dato of datosEmbalaje" [ngValue]="dato.ecodembalaje"
                                                [selected]="dato.ecodembalaje == null">
                                                {{dato.tnombre}}
                                            </option>
                                        </select>
                                        <div *ngIf="submitBien && f.ecodembalaje.errors" class="invalid-feedback">
                                            <div *ngIf="f.ecodembalaje.errors.required">Embalaje es requerido</div>
                                        </div>
                                        <input class="form-control form-control-sm" id="tembalaje"
                                            name="carga[tembalaje]" size="30" type="hidden"
                                            formControlName="tembalaje" />

                                    </div>
                                </div>
                                <div class='col-sm-2'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="ecodnaviera">Naviera</label>
                                        <select class="custom-select form-control-sm" id="ecodnaviera"
                                            name="carga[ecodnaviera]" [(ngModel)]="seleccionNaviera"
                                            (change)="onChangeNaviera($event)" formControlName="ecodnaviera"
                                            [ngClass]="{ 'is-invalid': submitBien && f.ecodnaviera.errors }">

                                            <option *ngFor="let dato of datosNaviera" [value]="dato.ecodnaviera"
                                                [selected]="dato.ecodnaviera == null">
                                                {{dato.tnombre}}
                                            </option>
                                        </select>
                                        <input class="form-control form-control-sm" id="tnaviera" name="carga[tnaviera]"
                                            size="30" type="hidden" formControlName="tnaviera" />

                                        <div *ngIf="submitBien && f.tnaviera.errors" class="invalid-feedback">
                                            <div *ngIf="f.tnaviera.errors.required">Naviera es requerido</div>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-sm-2'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="tmarcas">{{lblSerieMarca}}</label>
                                        <input class="form-control form-control-sm" id="tmarcas" name="carga[tmarcas]"
                                            size="30" type="text" oninput="this.value = this.value.toUpperCase()"
                                            formControlName="tmarcas"
                                            [ngClass]="{ 'is-invalid': submitBien && f.tmarcas.errors }" maxlength="11"
                                            [ngModel]="tmarcas" />
                                        <div *ngIf="submitBien && f.tmarcas.errors" class="invalid-feedback">
                                            <div *ngIf="f.tmarcas.errors.required">{{lblSerieMarca}} es requerido
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-sm-1'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="ttipocontenedor">Tpo.
                                            cont</label>
                                        <select class="custom-select form-control-sm" id="ttipocontenedor"
                                            name="carga[ttipocontenedor]" formControlName="ttipocontenedor"
                                            [ngClass]="{ 'is-invalid': submitBien && f.ttipocontenedor.errors }">
                                            <option [ngValue]="0" selected disabled>SELECCIONAR</option>
                                            <option *ngFor="let dato of datosTipoContenedor" [ngValue]="dato.id"
                                                [selected]="dato.id == null">
                                                {{dato.ttipo}}
                                            </option>
                                        </select>
                                        <div *ngIf="submitBien && f.ttipocontenedor.errors" class="invalid-feedback">
                                            <div *ngIf="f.ttipocontenedor.errors.required">Tpo. cont es
                                                requerido
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-sm-1'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="tsellos">Sello(s)</label>
                                        <input class="form-control form-control-sm" id="tsellos" name="carga[tsellos]"
                                            size="30" type="text" oninput="this.value = this.value.toUpperCase()"
                                            formControlName="tsellos" [readonly]="isReadonly"
                                            [ngClass]="{ 'is-invalid': submitBien && f.tsellos.errors }" />
                                        <div *ngIf="submitBien && f.tsellos.errors" class="invalid-feedback">
                                            <div *ngIf="f.tsellos.errors.required">Sello(s) es requerido</div>
                                            <div *ngIf="f.tsellos.errors.pattern">Sello(s) captura no valido
                                                Ejemplo:sello1/sello2/sello3.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-sm-1'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="epesoneto">Peso neto</label>
                                        <input class="form-control form-control-sm" id="epesoneto"
                                            name="carga[epesoneto]" size="30" type="text"
                                            oninput="this.value = this.value.toUpperCase()" formControlName="epesoneto"
                                            [ngClass]="{ 'is-invalid': submitBien && f.epesoneto.errors }" />
                                        <div *ngIf="submitBien && f.epesoneto.errors" class="invalid-feedback">
                                            <div *ngIf="f.epesoneto.errors.required">Peso neto es requerido</div>
                                            <div *ngIf="f.epesoneto.errors?.['number']">Peso neto valor numérico!
                                            </div>
                                            <div *ngIf="f.epesoneto.errors?.['precision']">Peso neto maximo 2
                                                decimales
                                                numérico!</div>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-sm-1'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="epesobruto">Peso bruto</label>
                                        <input class="form-control form-control-sm" id="epesobruto"
                                            name="carga[epesobruto]" size="30" type="text"
                                            oninput="this.value = this.value.toUpperCase()" formControlName="epesobruto"
                                            [ngClass]="{ 'is-invalid': submitBien && f.epesobruto.errors }" />
                                        <div *ngIf="submitBien && f.epesobruto.errors" class="invalid-feedback">
                                            <div *ngIf="f.epesobruto.errors.required">Peso bruto es requerido</div>
                                            <div *ngIf="f.epesobruto.errors?.['number']">Peso bruto valor numérico!
                                            </div>
                                            <div *ngIf="f.epesobruto.errors?.['precision']">Peso bruto maximo 2
                                                decimales numérico!</div>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-sm-1'>
                                    <div class='form-group'>
                                        <label class="form-label required" for="ebultos">Bultos</label>
                                        <input class="form-control form-control-sm" id="ebultos" name="carga[ebultos]"
                                            size="30" type="text" oninput="this.value = this.value.toUpperCase()"
                                            formControlName="ebultos"
                                            [ngClass]="{ 'is-invalid': submitBien && f.ebultos.errors }" />
                                        <div *ngIf="submitBien && f.ebultos.errors" class="invalid-feedback">
                                            <div *ngIf="f.ebultos.errors.required">Bultos es requerido</div>
                                            <div *ngIf="f.ebultos.errors?.['number']">Bultos valor numérico!</div>
                                            <div *ngIf="f.ebultos.errors?.['precision']">Bultos maximo 2 decimales
                                                numérico!</div>
                                        </div>
                                    </div>
                                </div>

                                <div class='col-sm-1'>
                                    <div class='form-group'>
                                        <br>
                                        <!--<button type="button" mat-raised-button color="primary"
                        (click)="e_datosBien(FormDatosBien.value)">Agregar</button>-->
                                        <button type="button" mat-raised-button color="primary"
                                            (click)="e_agregarBien(FormDatosBien.value)"><i
                                                class="fas fa-plus mg-r-5 fa-1.5x"></i>Agregar</button>
                                    </div>
                                </div>
                                <div class='col-sm-1' *ngIf="divecodCarga">
                                    <div class='form-group'>
                                        <label class="form-label" for="idsequence"></label>
                                        <input class="form-control form-control-sm" id="idsequence"
                                            name="carga[idsequence]" formControlName="idsequence" #textField1 size="5"
                                            type="hidden" #idsequence />
                                    </div>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-sm mg-b-0">
                                    <tr>
                                        <th scope="col" colspan="2">Accciones</th>
                                        <th scope="col">#</th>
                                        <th scope="col">Trámite</th>
                                        <th scope="col">Carga</th>
                                        <th scope="col">Embalaje</th>
                                        <th scope="col">Naviera</th>
                                        <th scope="col">Contenedor</th>
                                        <th scope="col">Tipo</th>
                                        <th scope="col">Sello(s)</th>
                                        <th scope="col">Peso neto</th>
                                        <th scope="col">Peso bruto</th>
                                        <th scope="col">Bultos</th>
                                        <th scope="col">Mercancia(s)</th>
                                    </tr>
                                    <tbody>
                                        <tr *ngFor="let dato of listDatosCarga; let i = index">
                                            <td><button type="button" mat-raised-button color="primary"
                                                    (click)="e_eliminar(dato)"><i
                                                        class="fas fa-trash-alt mg-r-5 fa-1.5x"></i>Eliminar</button>
                                            </td>
                                            <td><button type="button" mat-raised-button color="primary"
                                                    (click)="e_editarBien(dato, i)"><i
                                                        class="fas fa-edit fa-1x mg-r-5 fa-1.5x"></i>Editar</button>
                                            </td>
                                            <td>{{i+ 1 }}</td>
                                            <td>{{dato.ttramite}}</td>
                                            <td>{{dato.ttipocarga}}</td>
                                            <td>{{dato.tembalaje}}</td>
                                            <td>{{dato.tnaviera}}</td>
                                            <td>{{dato.tmarcas}}</td>
                                            <td>{{dato.ttipocontenedor}}</td>
                                            <td>{{dato.tsellos}}</td>
                                            <td>{{dato.epesoneto}}</td>
                                            <td>{{dato.epesobruto}}</td>
                                            <td>{{dato.ebultos}}</td>
                                            <td><button type="button" mat-raised-button color="primary"
                                                    (click)="e_mercancias(dato)">Mercancias
                                                    [ + ]</button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </form>
                    </div>
                    <!--Fin Carga(s)-->
                    <!--Mercancia(s)-->
                    <div *ngIf="divMercancia" class="col-sm-12">
                        <form [formGroup]="FormDatosDetalleBien">
                            <div class="">
                                <div class='row gutters'>
                                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                        <h6 class="mt-3 mb-2 text-primary">+ Mercancia(s)</h6>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-sm mg-b-0">
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Trámite</th>
                                                <th scope="col">Embalaje</th>
                                                <th scope="col">Naviera</th>
                                                <th scope="col">Contenedor</th>
                                                <th scope="col">Tipo</th>
                                                <th scope="col">Peso neto</th>
                                                <th scope="col">Peso bruto</th>
                                                <th scope="col">Bultos</th>
                                                <th scope="col">Mercancia(s)</th>
                                            </tr>
                                            <tbody>
                                                <tr>
                                                    <td>{{datosBien.idsequence }}</td>
                                                    <td>{{datosBien.ttramite}}</td>
                                                    <td>{{datosBien.tembalaje}}</td>
                                                    <td>{{datosBien.tnaviera}}</td>
                                                    <td>{{datosBien.tmarcas}}</td>
                                                    <td>{{datosBien.ttipocontenedor}}</td>
                                                    <td>{{datosBien.epesoneto}}</td>
                                                    <td>{{datosBien.epesobruto}}</td>
                                                    <td>{{datosBien.ebultos}}</td>
                                                    <td><button type="button"
                                                            mat-raised-button color="primary"
                                                            (click)="e_carga(datosBien)">Mercancias
                                                            [ - ]</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                        <h6 class="mt-3 mb-2 text-primary">+ Detalle(s) mercancia(s)</h6>
                                    </div>
                                </div>
                                <div class='row gutters'>

                                    <div class='col-xl-1' *ngIf="divDetalleBien">
                                        <div class='form-group'>
                                            <label for="idSequenceDetalleBien"></label>
                                            <input class="form-control form-control-sm" id="idSequenceDetalleBien"
                                                name="mercancia[idSequenceDetalleBien]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="idSequenceDetalleBien" size="30" type="hidden"
                                                #idSequenceDetalleBien />
                                        </div>
                                    </div>
                                    <div class='col-xl-1'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="tfactura">Factura</label>
                                            <input class="form-control form-control-sm" id="tfactura"
                                                name="mercancia[tfactura]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="tfactura"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.tfactura.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.tfactura.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.tfactura.errors.required">Factura es requerido
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class='col-xl-2'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="tmarcas">Marcas</label>
                                            <input class="form-control form-control-sm" id="tmarcas"
                                                name="mercancia[tmarcas]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="tmarcas"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.tmarcas.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.tmarcas.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.tmarcas.errors.required">Marca es requerido</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-xl-2'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="tdescripcion">Descripcion</label>
                                            <input class="form-control form-control-sm" id="tdescripcion"
                                                name="mercancia[tdescripcion]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="tdescripcion"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.tdescripcion.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.tdescripcion.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.tdescripcion.errors.required">Descripcion es
                                                    requerido</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-xl-1'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="ecantidad">Bultos</label>
                                            <input class="form-control form-control-sm" id="ecantidad"
                                                name="mercancia[ecantidad]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="ecantidad"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.ecantidad.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.ecantidad.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.ecantidad.errors.required">Cantidad es requerido
                                                </div>
                                                <div *ngIf="fmercancia.ecantidad.errors?.['number']">Cantidad valor
                                                    numérico!</div>
                                                <div *ngIf="fmercancia.ecantidad.errors?.['precision']">Cantidad maximo
                                                    2
                                                    decimales numérico!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-xl-1'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="epesobruto">Peso Bruto</label>
                                            <input class="form-control form-control-sm" id="epesobruto"
                                                name="mercancia[epesobruto]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="epesobruto"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.epesobruto.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.epesobruto.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.epesobruto.errors.required">Peso bruto es
                                                    requerido
                                                </div>
                                                <div *ngIf="fmercancia.epesobruto.errors?.['number']">Peso bruto valor
                                                    numérico!</div>
                                                <div *ngIf="fmercancia.epesobruto.errors?.['precision']">Peso bruto
                                                    maximo 2
                                                    decimales numérico!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-xl-1'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="epesoneto">Peso neto</label>
                                            <input class="form-control form-control-sm" id="epesoneto"
                                                name="mercancia[epesoneto]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="epesoneto"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.epesoneto.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.epesoneto.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.epesoneto.errors.required">Peso neto es requerido
                                                </div>
                                                <div *ngIf="fmercancia.epesoneto.errors?.['number']">Peso neto valor
                                                    numérico!</div>
                                                <div *ngIf="fmercancia.epesoneto.errors?.['precision']">Peso neto maximo
                                                    2
                                                    decimales numérico!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-xl-1'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="evolumen">Volumen</label>
                                            <input class="form-control form-control-sm" id="evolumen"
                                                name="mercancia[evolumen]" size="30" type="text"
                                                oninput="this.value = this.value.toUpperCase()"
                                                formControlName="evolumen"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.evolumen.errors }" />
                                            <div *ngIf="submitDetalleBien && fmercancia.evolumen.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.evolumen.errors.required">Volumen es requerido
                                                </div>
                                                <div *ngIf="fmercancia.evolumen.errors?.['number']">Volumen valor
                                                    numérico!
                                                </div>
                                                <div *ngIf="fmercancia.evolumen.errors?.['precision']">Volumen maximo 2
                                                    decimales numérico!</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-sm-2'>
                                        <div class='form-group'>
                                            <label class="form-label required" for="ecodembalaje">Embalaje</label>
                                            <select class="custom-select form-control-sm" id="ecodembalaje"
                                                name="mercancia[ecodembalaje]" [(ngModel)]="seleccion"
                                                (change)="onChangeDetalleBien($event)" formControlName="ecodembalaje"
                                                [ngClass]="{ 'is-invalid': submitDetalleBien && fmercancia.ecodembalaje.errors }">
                                                <option *ngFor="let dato of datosEmbalaje" [ngValue]="dato.ecodembalaje"
                                                    [selected]="dato.ecodembalaje == null">
                                                    {{dato.tnombre}}
                                                </option>
                                            </select>
                                            <div *ngIf="submitDetalleBien && fmercancia.ecodembalaje.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="fmercancia.ecodembalaje.errors.required">Embalaje es
                                                    requerido
                                                </div>
                                            </div>
                                            <input class="form-control form-control-sm" id="tembalaje"
                                                name="mercancia[tembalaje]" size="30" type="hidden"
                                                formControlName="tembalaje" />

                                        </div>
                                    </div>
                                    <div class='col-xl-1'>
                                        <div class='form-group'>
                                            <br>
                                            <button type="button" mat-raised-button color="primary"
                                                (click)="e_agregarDetalleBien(FormDatosDetalleBien.value)"><i
                                                    class="fas fa-plus mg-r-5 fa-1.5x"></i>Agregar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-sm mg-b-0">
                                    <tr>
                                        <th scope="col" colspan="2">Accciones</th>
                                        <th scope="col">#</th>
                                        <th scope="col">Factura</th>
                                        <th scope="col">Marcas</th>
                                        <th scope="col">Descripcion</th>
                                        <th scope="col">Bultos</th>
                                        <th scope="col">Peso bruto</th>
                                        <th scope="col">Peso neto</th>
                                        <th scope="col">Volumen</th>
                                        <th scope="col">Embalajes</th>
                                    </tr>
                                    <tbody>
                                        <tr *ngFor="let dato of  listDetallesBien; let i = index">
                                            <td><button type="button" (click)="e_eliminarMercancia(dato)"
                                                    mat-raised-button color="primary"><i
                                                        class="fas fa-trash-alt mg-r-5 fa-1.5x"></i>Eliminar</button>
                                            </td>
                                            <td><button type="button" (click)="e_editarDetalleBien(dato)"
                                                    mat-raised-button color="primary"><i
                                                        class="fas fa-edit fa-1x mg-r-5 fa-1.5x"></i>Editar</button>
                                            </td>
                                            <td> {{i+ 1 }}</td>
                                            <td> {{dato.tfactura}}</td>
                                            <td> {{dato.tmarcas}}</td>
                                            <td> {{dato.tdescripcion}}</td>
                                            <td> {{dato.ecantidad}}</td>
                                            <td> {{dato.epesobruto}}</td>
                                            <td> {{dato.epesoneto}}</td>
                                            <td> {{dato.evolumen}}</td>
                                            <td> {{dato.tembalaje}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </div>
                    <!--Fin Mercancia(s)-->
                </div><!-- row -->
                <hr>
                <div class="row">
                    <div class="col-xl-12">
                        <h6 class="mt-3 mb-2 text-primary">+ Comentarios</h6>
                    </div>
                    <div class="col-xl-12">
                        <div class="row">
                            <label class="nopadding clrlbl"> Carácter restante:
                                {{reglaLenght.length}}/{{maxCaracteres}}</label>
                        </div>
                        <div class='form-group'>
                            <textarea id="tobservaciones"
                                placeholder="Por favor ingrese un máximo de {{maxCaracteres}} caracteres"
                                [maxlength]="maxCaracteres" [(ngModel)]="reglaLenght"
                                oninput="this.value = this.value.toUpperCase()" name="tobservaciones"
                                formControlName="tobservaciones" rows="4" style="width:100%;">
                      </textarea>
                        </div>
                    </div>
                </div>
            </form>
        </div><!-- card-body -->

    </div> <!-- card -->

</div><!-- content-body -->